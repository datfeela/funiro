"use strict";const isMobile={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return isMobile.Android()||isMobile.BlackBerry()||isMobile.iOS()||isMobile.Opera()||isMobile.Windows()}};let checkStartTime=(new Date).getTime();console.log("henlo, ",checkStartTime),window.onload=function(){let e=(new Date).getTime();console.log("window loaded, ",e),console.log("time diff: ",e-checkStartTime)},document.addEventListener("DOMContentLoaded",(e=>{let t=(new Date).getTime();console.log("DOM loaded, ",t),console.log("time diff: ",t-checkStartTime),document.addEventListener("click",(e=>{e.target.closest("a")&&e.preventDefault();//!контрю переход по ссылке, убрать позже
}));const s=document.querySelector(".header__menu");s.addEventListener("click",(function(e){const t=e.target;if(document.documentElement.clientWidth>768)if(!t.closest(".menu__sub-list")&&t.closest(".menu__item._hover"))t.closest(".menu__item").classList.toggle("_hover");else if(t.closest(".menu__item")){let e=s.querySelector(".menu__item._hover");e&&e.classList.remove("_hover"),t.closest(".menu__item").classList.toggle("_hover")}})),document.addEventListener("click",(e=>{const t=e.target,s=document.querySelector("._hover");t.closest(".menu__item")||null==s||s.classList.remove("_hover")})),$(".menu__arrow").click((function(){document.documentElement.clientWidth<=768&&($(this).next(".menu__sub-list").slideToggle(),$(this).toggleClass("_active"))})),$(window).resize((function(){document.documentElement.clientWidth>768&&($(".menu__sub-list").css("display","block"),$(".menu__arrow").hasClass("_active")&&$(".menu__arrow").removeClass("_active")),document.documentElement.clientWidth<768&&($(".menu__arrow").hasClass("_active")||$(".menu__sub-list").css("display","none"))}));const i=document.querySelector(".search-form");i.addEventListener("click",(e=>{e.target.closest(".search-form__button_lowres")&&i.classList.toggle("_active")})),document.addEventListener("click",(e=>{const t=e.target,s=document.querySelector(".search-form");!t.closest(".search-form")&&s.classList.contains("_active")&&s.classList.remove("_active")}));document.querySelector(".burger").addEventListener("click",(e=>{s.classList.toggle("_active")}));const o=document.querySelector(".header");new IntersectionObserver((function(e,t){e[0].isIntersecting?o.classList.remove("_scroll"):o.classList.add("_scroll")})).observe(o);class n{constructor(e){this.sliderWrap=e.sliderWrap,this.nextBtn=e.nextBtn,this.prevBtn=e.prevBtn,this.sliderPos=e.sliderPos,this.isDragging=!1,this.startPos,this.slidesPerSwipe=e.slidesPerSwipe,this.currentTranslate,this.prevTranslate=0,this.startTime,this.endTime,this.activeDot=e.activeDot,this.sliderPages=e.sliderPages,this.activePage,this.dots=e.dots,this.sliderName=e.sliderName}touchStart(e){this.startPos=this.getPositionX(e),this.isDragging=!0,this.startTime=(new Date).getTime()}touchMove(e){if(this.isDragging){const t=this.getPositionX(e);this.currentTranslate=this.prevTranslate+t-this.startPos}}touchEnd(){this.isDragging=!1;const e=this.currentTranslate-this.prevTranslate;this.endTime=(new Date).getTime()-this.startTime,e<-150&&this.endTime<400&&this.swipeRight(),e>150&&this.endTime<400&&this.swipeLeft()}getPositionX(e){return e.type.includes("mouse")?e.pageX:e.touches[0].clientX}swipeRight(){this.sliderPos<Math.ceil(this.sliderWrap.childElementCount/this.slidesPerSwipe)-1&&(this.sliderPos+=1,this.swipeSlider(),this.changeActiveSlide())}swipeLeft(){this.sliderPos>0&&(this.sliderPos-=1,this.swipeSlider(),this.changeActiveSlide())}swipeOnDot(e){if(e.target.classList.contains(`controls-${this.sliderName}__dot`)&&!e.target.classList.contains("_active")){this.activeDot.classList.remove("_active"),e.target.classList.add("_active");let t=this.dots.firstElementChild.id.length-1;this.activeDot=e.target,this.sliderPos=e.target.id.slice(t)-1,this.sliderWrap.style.transform=`translateX(${this.sliderPos*-this.calcSlideWidth()*this.slidesPerSwipe}px)`,this.changeActiveSlide(),this.blockButtons()}}calcSlideWidth(){let e=getComputedStyle(this.activePage).width;e=e.slice(0,3);let t=getComputedStyle(this.activePage).marginRight;return t=t.slice(0,2),e=+e+ +t,e}swipeSlider(){this.sliderWrap.style.transform=`translateX(${this.sliderPos*-this.calcSlideWidth()*this.slidesPerSwipe}px)`,this.activeDot.classList.remove("_active"),this.activeDot=document.querySelector(`.controls-${this.sliderName}__dot_${this.sliderPos+1}`),this.activeDot.classList.add("_active"),this.blockButtons()}changeActiveSlide(){this.activePage.classList.remove("_active"),this.activePage=document.getElementById(`${this.sliderName}-page-${this.sliderPos*this.slidesPerSwipe+1}`),this.activePage.classList.add("_active")}blockButtons(){switch(this.sliderPos){case 0:this.prevBtn.classList.contains("_blocked")||this.prevBtn.classList.add("_blocked"),this.nextBtn.classList.contains("_blocked")&&this.nextBtn.classList.remove("_blocked");break;case Math.ceil(this.sliderWrap.childElementCount/this.slidesPerSwipe)-1:this.nextBtn.classList.contains("_blocked")||this.nextBtn.classList.add("_blocked"),this.prevBtn.classList.contains("_blocked")&&this.prevBtn.classList.remove("_blocked");break;default:this.nextBtn.classList.contains("_blocked")&&this.nextBtn.classList.remove("_blocked"),this.prevBtn.classList.contains("_blocked")&&this.prevBtn.classList.remove("_blocked")}}hideDots(){let e=Array.from(this.dots.children),t=Math.ceil(e.length/this.slidesPerSwipe);for(let s=t;s<e.length;s++)e[s].style.display="none";for(let s=0;s<t;s++)e[s].style.display="block";this.dots.style.width=11*t+20*(t-1)+"px"}}c(document.querySelectorAll(".slider-main__page"),document.querySelector(".slider-main__controls"),"slider-dots controls-slider-main__dots","slider-dots__dot controls-slider-main__dot controls-slider-main__dot_","sliderMainDot");const r=new n({sliderWrap:document.querySelector(".slider-main__wrapper"),nextBtn:document.querySelector("#main-slider-arrow-right"),prevBtn:document.querySelector("#main-slider-arrow-left"),sliderPos:0,slidesPerSwipe:1,activeDot:document.querySelector(".controls-slider-main__dot_1"),sliderPages:Array.from(document.querySelectorAll(".slider-main__page")),dots:document.querySelector(".controls-slider-main__dots"),sliderName:"slider-main"});function c(e,t,s,i,o){const n=e.length,r=t;let c=document.createElement("div");c.className=`${s}`,c.style.width=27+20*(n-1)+11*(n-1)+"px";for(let e=0;e<n;e++){let t=document.createElement("div");t.className=`${i}${e+1}`,t.id=`${o}${e+1}`,c.append(t)}r.prepend(c)}r.activePage=r.sliderPages[0],r.activePage.classList.add("_active"),r.activeDot.classList.add("_active"),setTimeout((()=>{r.swipeRight()}),1e3),r.nextBtn.addEventListener("click",(()=>{r.swipeRight()})),r.prevBtn.addEventListener("click",(()=>{r.swipeLeft()})),r.dots.addEventListener("click",(e=>{r.swipeOnDot(e)})),r.sliderWrap.addEventListener("touchstart",(e=>{r.touchStart(e)})),r.sliderWrap.addEventListener("touchmove",(e=>{r.touchMove(e)})),r.sliderWrap.addEventListener("touchend",(()=>{r.touchEnd()})),r.sliderWrap.addEventListener("mousedown",(e=>{r.touchStart(e)})),r.sliderWrap.addEventListener("mouseup",(()=>{r.touchEnd()})),r.sliderWrap.addEventListener("mouseleave",(()=>{r.touchEnd()})),r.sliderWrap.addEventListener("mousemove",(e=>{r.touchMove(e)})),$(window).resize((function(){r.sliderWrap.style.transform=`translateX(${r.sliderPos*-r.calcSlideWidth()}px)`})),r.sliderPages.forEach((e=>{e.querySelector("img").addEventListener("dragstart",(e=>e.preventDefault()))})),c(document.querySelectorAll(".slider-rooms__page"),document.querySelector(".slider-rooms__controls"),"slider-dots controls-slider-rooms__dots","slider-dots__dot controls-slider-rooms__dot controls-slider-rooms__dot_","sliderRoomsDot");const l=new n({sliderWrap:document.querySelector(".slider-rooms__wrapper"),nextBtn:document.querySelector("#rooms-slider-arrow-right"),prevBtn:document.querySelector("#rooms-slider-arrow-left"),sliderPos:0,slidesPerSwipe:1,activeDot:document.querySelector(".controls-slider-rooms__dot_1"),sliderPages:Array.from(document.querySelectorAll(".slider-rooms__page")),dots:document.querySelector(".controls-slider-rooms__dots"),sliderName:"slider-rooms"});l.activePage=l.sliderPages[0],l.activeDot.classList.add("_active"),l.activePage.classList.add("_active"),l.dots.children[0].style.opacity="0",l.dots.children[l.dots.childElementCount-1].style.opacity="0",l.dots.children[l.dots.childElementCount-2].style.opacity="0",l.dots.children[l.dots.childElementCount-3].style.opacity="0",setTimeout((()=>{l.swipeRight()}),1e3),l.calcSlideWidth=()=>{let e;e=l.activePage.nextElementSibling?getComputedStyle(l.activePage.nextElementSibling).width:getComputedStyle(l.activePage.previousElementSibling).width,e=e.slice(0,3);let t=getComputedStyle(l.activePage).marginRight;return t=t.slice(0,2),e=+e+ +t,e},l.swipeRight=()=>{l.unlockAnimations(),l.sliderPos<l.sliderWrap.childElementCount-4?(l.sliderPos+=1,l.swipeSlider(),l.changeActiveSlide()):l.nextBtn.classList.contains("_blocked")||(l.sliderPos+=1,l.swipeSlider(),l.changeActiveSlide(),setTimeout((()=>{l.lockAnimations(),l.sliderPos=1,l.swipeSlider(),l.changeActiveSlide()}),600))},l.swipeLeft=()=>{l.unlockAnimations(),l.sliderPos>1?(l.sliderPos-=1,l.swipeSlider(),l.changeActiveSlide()):l.nextBtn.classList.contains("_blocked")||(l.sliderPos-=1,l.swipeSlider(),l.changeActiveSlide(),setTimeout((()=>{l.lockAnimations(),l.sliderPos=6,l.swipeSlider(),l.changeActiveSlide()}),600))},l.blockButtons=()=>{switch(l.sliderPos){case 0:l.prevBtn.classList.contains("_blocked")||l.prevBtn.classList.add("_blocked"),l.nextBtn.classList.contains("_blocked")||l.nextBtn.classList.add("_blocked");break;case l.sliderWrap.childElementCount-3:l.nextBtn.classList.contains("_blocked")||l.nextBtn.classList.add("_blocked"),l.prevBtn.classList.contains("_blocked")||l.prevBtn.classList.add("_blocked");break;default:l.nextBtn.classList.contains("_blocked")&&l.nextBtn.classList.remove("_blocked"),l.prevBtn.classList.contains("_blocked")&&l.prevBtn.classList.remove("_blocked")}},l.lockAnimations=()=>{l.sliderWrap.style.transition="none",$(".page-slider-rooms__image").css("transition","none"),$(".page-slider-rooms__content").css("transition","none")},l.unlockAnimations=()=>{l.sliderWrap.style.transition="",$(".page-slider-rooms__image").css("transition",""),$(".page-slider-rooms__content").css("transition","")},l.nextBtn.addEventListener("click",(()=>{l.swipeRight()})),l.prevBtn.addEventListener("click",(()=>{l.swipeLeft()})),l.dots.addEventListener("click",(e=>{l.unlockAnimations(),l.swipeOnDot(e)})),l.sliderWrap.addEventListener("touchstart",(e=>{l.touchStart(e)})),l.sliderWrap.addEventListener("touchmove",(e=>{l.touchMove(e)})),l.sliderWrap.addEventListener("touchend",(()=>{l.touchEnd()})),l.sliderWrap.addEventListener("mousedown",(e=>{l.touchStart(e)})),l.sliderWrap.addEventListener("mouseup",(()=>{l.touchEnd()})),l.sliderWrap.addEventListener("mouseleave",(()=>{l.touchEnd()})),l.sliderWrap.addEventListener("mousemove",(e=>{l.touchMove(e)})),$(window).resize((function(){setTimeout((()=>{l.sliderWrap.style.transform=`translateX(${l.sliderPos*-l.calcSlideWidth()}px)`}),1500)})),l.sliderPages.forEach((e=>{e.querySelector("img").addEventListener("dragstart",(e=>e.preventDefault()))})),c(document.querySelectorAll(".slider-tips__page"),document.querySelector(".slider-tips__controls"),"slider-dots controls-slider-tips__dots","slider-dots__dot controls-slider-tips__dot controls-slider-tips__dot_","sliderTipsDot");let d=3;document.documentElement.clientWidth<1350&&(d=2);const a=new n({sliderWrap:document.querySelector(".slider-tips__wrapper"),nextBtn:document.querySelector("#tips-slider-arrow-right"),prevBtn:document.querySelector("#tips-slider-arrow-left"),sliderPos:0,slidesPerSwipe:d,activeDot:document.querySelector(".controls-slider-tips__dot_1"),sliderPages:Array.from(document.querySelectorAll(".slider-tips__page")),dots:document.querySelector(".controls-slider-tips__dots"),sliderName:"slider-tips"});a.activePage=a.sliderPages[0],a.activeDot.classList.add("_active"),a.activePage.classList.add("_active"),a.blockButtons(),a.hideDots(),a.nextBtn.addEventListener("click",(()=>{a.swipeRight()})),a.prevBtn.addEventListener("click",(()=>{a.swipeLeft()})),a.dots.addEventListener("click",(e=>{a.swipeOnDot(e)})),a.sliderWrap.addEventListener("touchstart",(e=>{a.touchStart(e)})),a.sliderWrap.addEventListener("touchmove",(e=>{a.touchMove(e)})),a.sliderWrap.addEventListener("touchend",(()=>{a.touchEnd()})),a.sliderWrap.addEventListener("mousedown",(e=>{a.touchStart(e)})),a.sliderWrap.addEventListener("mouseup",(()=>{a.touchEnd()})),a.sliderWrap.addEventListener("mouseleave",(()=>{a.touchEnd()})),a.sliderWrap.addEventListener("mousemove",(e=>{a.touchMove(e)})),$(window).resize((function(){a.sliderWrap.style.transform=`translateX(${a.sliderPos*-a.calcSlideWidth()*a.slidesPerSwipe}px)`,document.documentElement.clientWidth>1350&&3!=a.slidesPerSwipe&&(a.slidesPerSwipe=3,a.hideDots(),a.sliderPos=0,a.swipeSlider()),document.documentElement.clientWidth>=700&&document.documentElement.clientWidth<=1350&&2!=a.slidesPerSwipe&&(a.slidesPerSwipe=2,a.hideDots(),a.sliderPos=0,a.swipeSlider()),document.documentElement.clientWidth<700&&1!=a.slidesPerSwipe&&(a.slidesPerSwipe=1,a.sliderPos=0,a.swipeSlider())})),a.sliderPages.forEach((e=>{e.querySelector("img").addEventListener("dragstart",(e=>e.preventDefault()))}));//!fix!!!!
const u=document.querySelector(".products");let _=0;function p(){m.classList.remove("_active"),m.classList.remove("_opened"),h.style.opacity="0",h.style.visibility="hidden"}u.addEventListener("click",(function(e){e.target.closest(".products__load-more-button")&&async function(e){if(!e.classList.contains("_hold")){e.classList.add("_hold");const t="https://datfeela.github.io/funiro/json/products.json";let s=await fetch(t,{method:"GET"});if(s.ok){!function(e,t){const s=document.querySelector(".products__items");if(_>=e.products.length)return void t.classList.add("_blocked");let i=0;for(let o=_;o<_+4;o++){let n=e.products[o];const r=n.id,c=n.image,l=n.title,d=n.text,a=n.price,u=n.priceOld,p=n.shareUrl,m=n.labels;let h=`<div data-prodid="${r}" class="products__product product">`,v="</div>",g="";if(m){let e='<div class="product__labels">',t="</div>",s="";m.forEach((e=>{s+=`<div class="product__label product__label_${e.type}">${e.value}</div>`})),g+=e,g+=s,g+=t}let L=`\n            <img class="product__image" src="${c}" alt="${l}" />\n            `,S="",y=`\n            <h2 class="product__title">${l}</h2>\n            <span class="product__description">${d}</span>\n\t        `,w="",b=`<span class="product__price">Rp ${a}</span>`,f=`<span class="product__old-price">Rp ${u}</span>`;w='<div class="product__prices">',w+=b,u&&(w+=f),w+="</div>",S+='<div class="product__content">',S+=y,S+=w,S+="</div>";let E=`\n            <div class="product__popup popup-product">\n                <div class="popup-product__actions">\n                    <a href="" class="popup-product__button">Add to cart</a>\n                    <a href="${p}" class="popup-product__link">\n                        <svg class="popup-product__icon popup-product__icon_share">\n                            <use xlink:href="#share"></use>\n                        </svg>\n                        <span class="popup-product__text">Share</span>\n                    </a>\n                    <button class="popup-product__like-button">\n                        <svg class="popup-product__icon popup-product__icon_like">\n                            <use xlink:href="#favorite"></use>\n                        </svg>\n                        <span class="popup-product__text">Like</span>\n                    </button>\n                </div>\n            </div>\n\t    `,k="";k+=S,k+=E;let P="";if(P+=h,P+=g,P+=L,P+=k,P+=v,s.insertAdjacentHTML("beforeend",P),i++,_+i>=e.products.length)return _+=i,void t.classList.add("_blocked")}_+=i}(await s.json(),e),e.classList.remove("_hold")}else alert("something went wrong...")}}(e.target.closest(".products__load-more-button"))}));const m=document.querySelector(".actions__item.cart"),h=m.querySelector("span"),v=m.querySelector(".cart__list");let g=+h.innerHTML;u.addEventListener("click",(e=>{const t=e.target;if(t.closest(".popup-product__button")){let e=t.closest(".product");if(e.classList.contains("_added")){const t=e.dataset.prodid,s=document.querySelector(`.item-cart[data-prodid="${t}"]`);let i=s.querySelector(".quantity-cart__counter").innerHTML;s.querySelector(".quantity-cart__counter").innerHTML=++i,g++}else{e.classList.add("_added");let t=document.createElement("li");t.dataset.prodid=e.dataset.prodid,t.className="cart__item item-cart",t.insertAdjacentHTML("afterBegin",`\n                <img class="item-cart__image" src="${e.querySelector(".product__image").getAttribute("src")}" alt="">\n                <h2 class="item-cart__title">${e.querySelector(".product__title").innerHTML}</h2>\n                <span class="item-cart__price">${e.querySelector(".product__price").innerHTML}</span>\n                <div class="item-cart__quantity quantity-cart">\n                <button class="quantity-cart__button quantity-cart__button_minus">-</button>\n                <span class="quantity-cart__counter">1</span>\n                <button class="quantity-cart__button quantity-cart__button_plus">+</button>\n                </div>\n                <button class="item-cart__delete-button">\n                    <svg class="item-cart__icon">\n                        <use xlink:href="#delete"></use>\n                    </svg>\n                </button>\n                `),v.append(t),g++}m.classList.contains("_active")||(m.classList.add("_active"),h.style.opacity="1",h.style.visibility="visible"),g>99?(h.innerHTML="99+",h.style.height="20px",h.style.width="20px"):(h.innerHTML=`${g}`,h.style.height="16px",h.style.width="16px")}})),v.addEventListener("click",(e=>{const t=e.target;if(e.target.classList.contains("quantity-cart__button_minus")){let s=t.nextElementSibling.innerHTML;if(s>1)t.nextElementSibling.innerHTML=--s,g--;else{e.preventDefault();const s=t.closest(".item-cart").dataset.prodid;document.querySelector(`.product[data-prodid="${s}"]`).classList.remove("_added"),t.closest(".item-cart").remove(),g--}}if(e.target.classList.contains("quantity-cart__button_plus")){let e=t.previousElementSibling.innerHTML;t.previousElementSibling.innerHTML=++e,g++}g>99?(h.innerHTML="99+",h.style.height="20px",h.style.width="20px"):(h.innerHTML=`${g}`,h.style.height="16px",h.style.width="16px"),g<1&&p()})),o.addEventListener("click",(e=>{const t=e.target;if(t.closest(".item-cart__delete-button")){e.preventDefault();let s=t.closest(".item-cart").querySelector(".quantity-cart__counter").innerHTML;const i=t.closest(".item-cart").dataset.prodid;document.querySelector(`.product[data-prodid="${i}"]`).classList.remove("_added"),g-=s,t.closest(".item-cart").remove(),h.innerHTML=`${g}`,g<1&&p()}})),o.addEventListener("click",(e=>{const t=e.target,s=document.querySelector(".cart__delete-popup"),i=document.querySelector(".cart__delete-popup-button_yes"),o=document.querySelector(".cart__delete-popup-button_no");t.classList.contains("cart__delete-button")&&(s.classList.add("_active"),i.onclick=()=>{document.querySelectorAll(".product._added").forEach((e=>{e.classList.remove("_added")})),t.previousElementSibling.innerHTML="",g=0,p(),s.classList.remove("_active")},o.onclick=()=>{s.classList.remove("_active")})})),o.addEventListener("click",(e=>{const t=e.target;(t.closest(".cart__icon")||t.closest(".search-form"))&&m.classList.contains("_opened")?m.classList.remove("_opened"):t.closest(".cart__icon")&&!m.classList.contains("_opened")&&m.classList.contains("_active")&&m.classList.add("_opened")})),$(".footer__title").click((function(){document.documentElement.clientWidth<=576&&($(this).next(".footer__list").slideToggle(),$(this).parent().toggleClass("_active"))})),$(window).resize((function(){document.documentElement.clientWidth>576&&($(".footer__list").css("display","block"),$(".footer__block").hasClass("_active")&&$(".footer__block").removeClass("_active")),document.documentElement.clientWidth<576&&($(".footer__block").hasClass("_active")||$(".footer__list").css("display","none"))}))}));